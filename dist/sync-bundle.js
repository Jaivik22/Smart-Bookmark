import{d as i,a as l,g as u}from"./firebase-bundle.js";document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("syncCode"),c=document.getElementById("submitCode"),d=document.getElementById("codeDisplay"),a=window.browser||window.chrome;function n(e,o="success"){toast.textContent=e,toast.className=`toast ${o} show`,setTimeout(()=>{toast.className="toast"},3e3)}c.addEventListener("click",async()=>{const e=s.value.trim();if(!e||!/^\d{6}$/.test(e)){console.log("Invalid input: Please enter a valid 6-digit code"),n("Please enter a valid 6-digit code","error");return}try{console.log("Checking sync code:",e);const o=i(l,"users",e),t=await u(o);console.log("Firebase getDoc response:",{exists:t.exists(),data:t.data(),id:t.id}),t.exists()?(await new Promise(r=>{a.storage.sync.set({syncCode:e},r)}),console.log("Sync code updated to:",e),d.textContent=`Your Bookmarks are synced to: ${e}`,s.value="",window.location.reload()):(console.log("No user document found for code:",e),n("No user found with this code","error"))}catch(o){console.error("Error checking sync code in Firebase:",o)}})});
